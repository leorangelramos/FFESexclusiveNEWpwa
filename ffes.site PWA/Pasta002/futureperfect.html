<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FFES | Future Perfect Master</title>
    <link rel="stylesheet" href="../style.css">
    <style>
        .theory-section { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 20px; padding: 2rem; margin-bottom: 30px; color: #fff; }
        .theory-section h2 { color: #b8860b; margin-bottom: 15px; }
        .formula-box { background: rgba(184, 134, 11, 0.1); border-left: 4px solid #b8860b; padding: 15px; font-family: 'Sora', sans-serif; margin: 20px 0; border-radius: 0 10px 10px 0; font-weight: bold; }
        .training-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 12px; margin-bottom: 30px; }
        .mode-btn { background: rgba(255, 255, 255, 0.07); border: 1px solid rgba(255, 255, 255, 0.1); padding: 15px; border-radius: 12px; color: #fff; cursor: pointer; transition: 0.3s; font-weight: bold; font-size: 0.85rem; }
        .mode-btn.active { background: rgba(184, 134, 11, 0.3); border-color: #b8860b; box-shadow: 0 0 15px rgba(184, 134, 11, 0.3); }
        .exercise-area { background: rgba(255, 255, 255, 0.05); border-radius: 20px; padding: 2rem; min-height: 350px; display: none; border: 1px solid rgba(184, 134, 11, 0.2); }
        .word-pill { display: inline-block; padding: 10px 18px; margin: 5px; background: rgba(184, 134, 11, 0.15); border: 1px solid #b8860b; border-radius: 25px; cursor: pointer; color: #fff; }
        .writing-input { width: 100%; background: rgba(255,255,255,0.05); border: 2px solid #b8860b; color: #fff; padding: 15px; border-radius: 10px; text-align: center; font-size: 1.2rem; }
    </style>
</head>
<body class="dashboard-container">
    <div class="background-glow glow-1"></div>
    <header class="glass-header"><h1>FUTURE <span class="text-gold">PERFECT</span></h1></header>
    <main style="max-width: 900px; margin: 0 auto; padding: 20px;">
        <section class="theory-section">
            <h2>Projeção de Conclusão</h2>
            <p>Usado para expressar uma ação que estará **concluída** antes de um tempo determinado no futuro.</p>
            <div class="formula-box">SUJEITO + WILL HAVE + VERBO (PARTICÍPIO)</div>
            <ul style="margin-left: 20px; opacity: 0.9;">
                <li><strong>Foco:</strong> O resultado final em uma data futura.</li>
                <li><strong>Exemplo:</strong> By next year, I <strong>will have graduated</strong>.</li>
                <li><strong>Expressão comum:</strong> Frequentemente usado com "By..." (Até...).</li>
            </ul>
        </section>
        <div class="training-grid">
            <button class="mode-btn" onclick="startMode('mc')">Múltipla Escolha</button>
            <button class="mode-btn" onclick="startMode('scrambled')">Ordenar Frase</button>
            <button class="mode-btn" onclick="startMode('translation')">Tradução</button>
            <button class="mode-btn" onclick="startMode('writing')">Escrita Livre</button>
        </div>
        <div id="exercise-display" class="exercise-area">
            <h3 id="mode-title" class="text-gold" style="margin-bottom:20px; text-transform: uppercase; font-size: 0.9rem;"></h3>
            <div id="quest-content"></div>
            <div id="feedback" style="margin-top:20px; font-weight:bold; min-height: 24px;"></div>
            <button id="nextBtn" onclick="nextQuestion()" class="btn-gold" style="display:none; margin-top:20px; width:100%">PRÓXIMA PERGUNTA ➡</button>
        </div>
        <div style="margin-top: 40px; text-align: center;"><a href="../index.html" class="card-glass"><span>⬅ Voltar ao Painel</span></a></div>
    </main>

    <script>
        const database = {
            mc: [
                {q: "By 8 PM, I _______ (finish) my work.", o: ["will have finished", "will finish", "have finished"], c: "will have finished"},
                {q: "They _______ (arrive) by tomorrow.", o: ["will have arrive", "will have arrived", "have arrived"], c: "will have arrived"},
                {q: "She _______ (not/eat) by the time you get here.", o: ["won't have eaten", "won't eaten", "won't have eat"], c: "won't have eaten"},
                {q: "Will you _______ (do) it by then?", o: ["have did", "done", "have done"], c: "have done"}
            ],
            scrambled: [
                {f: "I will have finished it", w: ["finished", "have", "will", "it", "I"]},
                {f: "By then she will have left", w: ["left", "will", "she", "By", "then", "have"]},
                {f: "They will have bought the house", w: ["bought", "will", "They", "the", "have", "house"]},
                {f: "We will have traveled by June", w: ["traveled", "will", "have", "We", "by", "June"]}
            ],
            translation: [
                {p: "Eu terei terminado.", o: ["I will have finished", "I will finished", "I have finished"], c: "I will have finished"},
                {p: "Eles terão saído.", o: ["They will leave", "They will have gone", "They have gone"], c: "They will have gone"},
                {p: "Até amanhã, nós teremos visto.", o: ["By tomorrow we will have seen", "Until tomorrow we see", "By tomorrow we see"], c: "By tomorrow we will have seen"},
                {p: "Ela terá feito o bolo.", o: ["She will have made the cake", "She will make cake", "She has made the cake"], c: "She will have made the cake"}
            ],
            writing: [
                {p: "Traduza: 'Eu terei estudado.'", c: "i will have studied"},
                {p: "Traduza: 'Ela terá ligado.'", c: "she will have called"},
                {p: "Traduza: 'Nós teremos ganho.'", c: "we will have won"},
                {p: "Traduza: 'Eles terão visto.'", c: "they will have seen"}
            ]
        };
        let currentMode = ''; let currentQ = 0; let selectedWords = [];
        function startMode(mode) { currentMode = mode; currentQ = 0; document.getElementById('exercise-display').style.display = 'block'; document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active')); event.target.classList.add('active'); renderQuestion(); }
        function renderQuestion() {
            const container = document.getElementById('quest-content'); const feedback = document.getElementById('feedback'); const nextBtn = document.getElementById('nextBtn'); const data = database[currentMode][currentQ];
            feedback.textContent = ""; nextBtn.style.display = "none"; container.innerHTML = "";
            if (currentMode === 'mc' || currentMode === 'translation') {
                container.innerHTML = `<p style='margin-bottom:20px; font-size:1.2rem;'>${data.q || data.p}</p>`;
                data.o.forEach(opt => { const b = document.createElement('button'); b.className = 'btn-gold'; b.style.width = '100%'; b.style.marginBottom = '8px'; b.textContent = opt; b.onclick = () => check(opt, data.c, b); container.appendChild(b); });
            } else if (currentMode === 'scrambled') {
                selectedWords = []; container.innerHTML = `<div id='ans' style='min-height:50px; border-bottom:2px solid #b8860b; margin-bottom:20px;'></div><div id='pool'></div>`;
                data.w.forEach(word => { const span = document.createElement('span'); span.className = 'word-pill'; span.textContent = word; span.onclick = () => { selectedWords.push(word); span.style.display='none'; document.getElementById('ans').textContent = selectedWords.join(" "); if(selectedWords.length === data.w.length) check(selectedWords.join(" "), data.f); }; document.getElementById('pool').appendChild(span); });
            } else if (currentMode === 'writing') {
                container.innerHTML = `<p>${data.p}</p><input type='text' id='winp' class='writing-input' onkeypress='if(event.key==="Enter") check(this.value, "${data.c}")'>`;
            }
        }
        function check(user, correct, el) { 
            const f = document.getElementById('feedback'); 
            if(user.toLowerCase().trim() === correct.toLowerCase()) { f.textContent = "CORRETO! +25 XP"; f.style.color = "#4ade80"; document.getElementById('nextBtn').style.display = "block"; let xp = parseInt(localStorage.getItem('ffes_xp')||0); localStorage.setItem('ffes_xp', xp+25); }
            else { f.textContent = "TENTE NOVAMENTE"; f.style.color = "#f87171"; }
        }
        function nextQuestion() { currentQ++; if(currentQ < 4) renderQuestion(); else document.getElementById('quest-content').innerHTML = "<h2 class='text-gold'>Módulo Concluído!</h2>"; }
    </script>
</body>
</html>

